(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],m=0,d=[];m<r.length;m++)o=r[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={app:0},n=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/movie_factory/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"05c3":function(t,e,a){},"0e6b":function(t,e,a){"use strict";a("3272")},"10f1":function(t,e,a){},1184:function(t,e,a){"use strict";a("10f1")},2037:function(t,e,a){"use strict";a("cabe")},"23a1":function(t,e,a){"use strict";a("dc5b")},"29a3":function(t,e,a){"use strict";a("f3d9")},"2cf6":function(t,e,a){"use strict";a("7f0a")},3272:function(t,e,a){},4360:function(t,e,a){"use strict";(function(t){a("fb6a"),a("a434"),a("d3b7"),a("ac1f"),a("25f0"),a("1276");var s=a("5530"),i=(a("96cf"),a("1da1")),n=a("2b0e"),o=a("2f62"),r=a("bc3a"),c=a.n(r);n["default"].use(o["a"]),e["a"]=new o["a"].Store({state:{cast:[],selectedFilm:{},isFavoriteFilm:!1,isSeenFilm:!1,getAllUser:[],seenDuration:0,selectedActor:{},videoPath:"",filmSpec:{},login:{getLoginURL:"https://the-movie-factory-api.herokuapp.com/user/login",getLoggedUser:{},getFavorite:[],getSeen:[]},popularFilm:[],categories:[]},mutations:{selectUser:function(t,e){t.login.getLoggedUser=e.data,t.login.getFavorite=e.data.favorite,t.login.getSeen=e.data.seen},toggleFavorite:function(t,e){t.isFavoriteFilm=!t.isFavoriteFilm},toggleSeenFilm:function(t,e){t.isSeenFilm=!t.isSeenFilm},fetchAllUser:function(t,e){t.getAllUser=e},addPopularFilm:function(t,e){t.popularFilm=e},addCategories:function(t,e){t.categories=e},addOneFilm:function(t,e){t.selectedFilm=e},addCast:function(t,e){t.cast=e},addPath:function(t,e){t.videoPath=e},addFilmSpec:function(t,e){t.filmSpec=e},addToFavorite:function(t,e){t.login.getFavorite.push(e)},removeFavorite:function(t,e){for(var a=e.id,s=0;s<t.login.getFavorite.length;s++)t.login.getFavorite[s].id==a&&t.login.getFavorite.splice(s,1)},addToSeen:function(t,e){t.login.getSeen.push(e)},removeSeen:function(t,e){for(var a=e.id,s=0;s<t.login.getSeen.length;s++)t.login.getSeen[s].id==a&&t.login.getSeen.splice(s,1)}},actions:{fetchUser:function(e,a){var s,n=a.email,o=a.password,r=a.router;c.a.post(this.state.login.getLoginURL,{email:n,password:o}).then(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(i){var n,o,c,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i.data;case 2:n=a.sent,o=n.token,c=o.split(".")[1],l=t.from(c,"base64"),s=JSON.parse(l.toString()),e.commit("selectUser",s),r.push("/home");case 9:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch()},fetchPopularFilm:function(t,e){t.commit("addPopularFilm",e)},fetchCategories:function(t,e){t.commit("addCategories",e)},addFilm:function(t,e){var a=this;c.a.get("https://the-movie-factory-api.herokuapp.com/api/movie/spec/".concat(e.id)).then(function(){var n=Object(i["a"])(regeneratorRuntime.mark((function n(o){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:c.a.get("https://the-movie-factory-api.herokuapp.com/api/movie/credits/".concat(e.id)).then(function(){var n=Object(i["a"])(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r.data.cast=r.data.cast.slice(0,5),c.a.get("https://the-movie-factory-api.herokuapp.com/api/movie/video/".concat(e.id)).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(i){var n,c,l,u,m,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.data.results[0].key;case 2:if(e.t0=e.sent,"https://www.youtube.com/embed/"+e.t0,"YouTube"!=i.data.results[0].site){e.next=10;break}return n=Object(s["a"])(Object(s["a"])(Object(s["a"])({},o.data),r.data),i.data),e.next=8,t.commit("addOneFilm",n);case 8:e.next=13;break;case 10:return c=Object(s["a"])(Object(s["a"])({},o.data),r.data),e.next=13,t.commit("addOneFilm",c);case 13:for(l=-1,u=a.state.login.getSeen,m=a.state.login.getFavorite,d=0;d<u.length;d++)m[d].id==a.payload.id&&(l=d);for(-1==l&&a.state.isSeenFilm&&t.commit("toggleSeenFilm"),-1==l||a.state.isSeenFilm||t.commit("toggleSeenFilm"),l=-1,p=0;p<m.length;p++)m[p].id==a.payload.id&&(l=p);-1==l&&a.state.isFavoriteFilm&&t.commit("toggleFavorite"),-1==l||a.state.isFavoriteFilm||t.commit("toggleFavorite");case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch((function(t){return t}))},fetchCast:function(t,e){t.commit("addCast",e)},fetchVideoPath:function(t,e){t.commit("addPath",e)},fetchFilmSpec:function(t,e){t.commit("addFilmSpec",e)}},modules:{},getter:{}})}).call(this,a("b639").Buffer)},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-lg p-0",attrs:{id:"app"}},[a("router-view")],1)},n=[],o={name:"App",components:{}},r=o,c=(a("034f"),a("2877")),l=Object(c["a"])(r,i,n,!1,null,null,null),u=l.exports,m=a("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("Navbar"),a("div",{staticClass:"row contentPage container-lg m-0 p-0"},[a("Menu",{staticClass:"col-lg-2"}),a("Main",{staticClass:"col-lg-10"})],1)],1)},p=[],f=(a("96cf"),a("1da1")),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"leftMenu m-0 ",attrs:{id:"sidebar"}},[t._m(0),a("button",{staticClass:"dropdown-toggle leftFilter bg-secondary text-light",attrs:{href:"#catFilm","data-toggle":"collapse","aria-expanded":"false"}},[t._v(" Categories ")]),a("ul",{staticClass:"collapse list-unstyled",attrs:{id:"catFilm"}},t._l(t.categories.genres,(function(t,e){return a("menu-link",{key:e,staticClass:"catMenu genres",attrs:{name:t.name,id:t.id}})})),1),a("button",{staticClass:"dropdown-toggle leftFilter bg-secondary text-light",attrs:{href:"#yearFilm","data-toggle":"collapse","aria-expanded":"false"}},[t._v(" Year ")]),a("ul",{staticClass:"collapse list-unstyled",attrs:{id:"yearFilm"}},[a("menu-link",{attrs:{name:"2021"}}),a("menu-link",{attrs:{name:"2020"}}),a("menu-link",{attrs:{name:"2019"}}),a("menu-link",{attrs:{name:"2018"}}),a("menu-link",{attrs:{name:"2017"}})],1)])},g=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar-header"},[a("h3",[t._v("Filter:")])])}],v=a("5530"),b=a("2f62"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"col-12 mb-2 cat",on:{click:function(e){return t.handleClick()}}},[t._v(t._s(t.name))])},C=[],w=(a("b0c0"),a("bc3a")),y=a.n(w),F={name:"MenuLink",computed:Object(v["a"])({},Object(b["b"])(["login","categories"])),props:["name","id"],methods:{handleClick:function(){var t=this;parseInt(this.name,10)>=2017&&parseInt(this.name,10)<=2021?y.a.get("https://the-movie-factory-api.herokuapp.com/api/movie/year/".concat(parseInt(this.name,10))).then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.data;case 2:s=e.sent,t.$store.dispatch("fetchPopularFilm",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){return console.log(t)})):y.a.get("https://the-movie-factory-api.herokuapp.com/api/movie/genre/".concat(this.id)).then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.data;case 2:s=e.sent,t.$store.dispatch("fetchPopularFilm",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){return console.log(t)}))}}},k=F,E=(a("bdd8"),Object(c["a"])(k,_,C,!1,null,"554eb2b0",null)),P=E.exports,x={components:{MenuLink:P},name:"Menu",computed:Object(v["a"])({},Object(b["b"])(["login","categories"]))},O=x,j=(a("2cf6"),Object(c["a"])(O,h,g,!1,null,"11aeb94d",null)),$=j.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"navMenu container-lg sticky-top"},[s("div",{staticClass:"headerTitle row"},[s("img",{attrs:{src:a("89fd"),alt:"logo",id:"logo"}}),s("h1",[t._v("The Movie Factory")]),s("search-bar")],1),s("ul",{staticClass:"mainMenu bg-dark"},[s("li",{on:{click:function(e){return t.getPopular()}}},[t._v("home")]),s("li",{on:{click:function(e){return t.getCommunityPage()}}},[t._v("Community")]),s("li",{on:{click:function(e){return t.getProfilPage()}}},[t._v(" "+t._s(t.login.getLoggedUser.username)+" ")])])])},R=[],U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchBar col-md-4"},["home"==this.$route.name?a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"search",attrs:{type:"text",placeholder:"search..."},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}):t._e(),"home"==this.$route.name?a("button",{on:{click:function(e){return t.handleFind()}}},[t._v(" Find ")]):t._e(),a("button",{staticClass:"btn-danger",on:{click:function(e){return t.handleLogout()}}},[t._v("log out")])])},L=[],I={name:"SearchBar",data:function(){return{searchValue:""}},computed:Object(v["a"])({},Object(b["b"])(["login","categories"])),methods:{handleLogout:function(){this.$store.dispatch("fetchUser",{}),this.$router.push("/")},handleFind:function(){var t=this;y.a.get("https://the-movie-factory-api.herokuapp.com/api/movie/title/".concat(this.searchValue)).then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.data;case 2:s=e.sent,t.$store.dispatch("fetchPopularFilm",s),"home"!=t.$route.name&&t.$router.push("/home");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){return console.log(t)}))}}},M=I,T=(a("a78f"),Object(c["a"])(M,U,L,!1,null,"793f8a81",null)),V=T.exports,A={components:{SearchBar:V},data:function(){return{notLogged:"not logged"}},name:"NavBar",computed:Object(v["a"])({},Object(b["b"])(["login"])),methods:{getPopular:function(){var t=this;y.a.get("https://the-movie-factory-api.herokuapp.com/api/movie/").then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.data;case 2:s=e.sent,t.$store.dispatch("fetchPopularFilm",s),"home"!=t.$route.name&&t.$router.push("/home");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){return console.log(t)}))},getProfilPage:function(){"profil"!=this.$route.name&&this.$router.push("/profil")},getCommunityPage:function(){var t=this;y.a.get("https://the-movie-factory-api.herokuapp.com/user/alluser").then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.data;case 2:s=e.sent,t.$store.commit("fetchAllUser",s),"community"!=t.$route.name&&t.$router.push("/community");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){return t}))}}},N=A,D=(a("648a"),Object(c["a"])(N,S,R,!1,null,"30f418e0",null)),B=D.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mainContent row m-0"},t._l(t.popularFilm.results,(function(t,e){return a("movie-card",{key:e,staticClass:"homeFilmCard col-md-6 p-0 m-0",attrs:{title:t.title,film:t,description:t.overview,vote:t.vote_average,path:t.poster_path,compPath:"/home"}})})),1)},q=[],H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row p-1 m-0 movieCard",on:{click:function(e){return t.selectFilm(t.film)}}},[a("div",{staticClass:"col-4 p-0"},[t.path?a("img",{staticClass:"moviePict",attrs:{src:"https://image.tmdb.org/t/p/w200/"+t.path,alt:"picture"}}):t._e()]),a("div",{staticClass:"col-8"},[a("div",{staticClass:"card-body p-2 cardBody"},[a("h5",{staticClass:"card-title"},[t._v(" "+t._s(t.title.slice(0,20)+(t.title.length>=20?"...":""))+" ")]),a("p",{staticClass:"card-text describe"},[t._v(" "+t._s(t.description.slice(0,100)+(t.description.length>=100?"...":""))+" ")]),a("p",{staticClass:"card-text"},[a("small",{staticClass:"text-muted vote"},[t._v("vote average: "+t._s(t.vote))])])])])])},J=[],Z={name:"MovieCard",components:{},methods:{selectFilm:function(t){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t){a.next=4;break}return a.next=3,e.$store.dispatch("addFilm",t);case 3:"/film"!==e.$route.path&&e.$router.push("/film");case 4:case"end":return a.stop()}}),a)})))()}},props:["title","description","vote","path","film","isActive"]},W=Z,Y=(a("1184"),Object(c["a"])(W,H,J,!1,null,"bc37b2dc",null)),G=Y.exports,K={components:{MovieCard:G},name:"Main",computed:Object(v["a"])({},Object(b["b"])(["popularFilm"])),methods:{}},Q=K,X=(a("29a3"),Object(c["a"])(Q,z,q,!1,null,"1fd25032",null)),tt=X.exports,et={name:"Home",beforeMount:function(){var t=this;y.a.get("https://the-movie-factory-api.herokuapp.com/api/movie/categories").then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.data;case 2:s=e.sent,t.$store.dispatch("fetchCategories",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){return console.log(t)})),y.a.get("https://the-movie-factory-api.herokuapp.com/api/movie/").then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.data;case 2:s=e.sent,t.$store.dispatch("fetchPopularFilm",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){return console.log(t)}))},components:{Navbar:B,Menu:$,Main:tt}},at=et,st=(a("0e6b"),Object(c["a"])(at,d,p,!1,null,"3c3b57ec",null)),it=st.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("LoginForm")],1)},ot=[],rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-lg p-0 m-0 testLogin"},[a("div",{staticClass:"LoginForm login-box"},[t._m(0),a("div",{staticClass:"login"},[a("form",{attrs:{action:""}},[a("div",{staticClass:"form-group log"},[a("label",{staticClass:"form-control-label",style:{color:t.emailColor}},[t._v(t._s(t.labelEmail))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t.forgot?t._e():a("div",{staticClass:"form-group log"},[a("label",{staticClass:"form-control-label",style:{color:t.passwordColor}},[t._v(t._s(t.labelPassword))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t.signup?a("div",{staticClass:"form-group log"},[a("label",{staticClass:"form-control-label",style:{color:t.usernameColor}},[t._v(t._s(t.labelUsername))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]):t._e(),!t.forgot&t.reset?a("div",{staticClass:"form-group log"},[a("label",{staticClass:"form-control-label",style:{color:t.passwordColor}},[t._v("new "+t._s(t.labelPassword))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword,expression:"newPassword"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.newPassword},on:{input:function(e){e.target.composing||(t.newPassword=e.target.value)}}})]):t._e(),a("div",{staticClass:"reset d-flex justify-content-center"},[a("span",{staticClass:"btn  ",on:{click:function(e){return t.handleSignup()}}},[t._v(" New account")]),a("span",{staticClass:"btn ",attrs:{type:"button","data-toggle":"modal","data-target":"#staticBackdrop"}},[t._v(" Forgot password ")])]),a("div",{staticClass:"boutons"},[t.reset||t.signup||t.forgot?t._e():a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.handleClick()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleClick()}}},[t._v(" Login ")]),t.forgot|t.signup|t.reset?a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.handleCancel()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleCancel()}}},[t._v(" Cancel ")]):t._e(),t.signup?a("button",{staticClass:"btn btn-outline-success",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.signups()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signups()}}},[t._v(" Sign Up ")]):t._e()])])]),a("div",{staticClass:"loginFooter"},[a("div",{staticClass:"testimonial-quote right"},[a("div",{staticClass:"quote-container"},[a("div",[a("blockquote",[t.forgot||t.reset||t.signup?t._e():a("p",[t._v("Le bouton rouge Régis")]),t.signup?a("p",[t._v("Le bouton vert Régis")]):t._e()]),t._m(1)])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"staticBackdrop","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content bg-dark border-0"},[t._m(2),a("div",{staticClass:"modal-body d-flex justify-content-center pb-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.forgotInput,expression:"forgotInput"}],attrs:{type:"text",placeholder:"regis@mail.fr",required:""},domProps:{value:t.forgotInput},on:{input:function(e){e.target.composing||(t.forgotInput=e.target.value)}}})]),t.isForgot?a("div",[a("mailer-component",{attrs:{recipientEmail:this.recipientEmail}})],1):t._e(),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" Cancel ")]),a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.handleForgot()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleForgot()}}},[t._v(" Send reset email ")])])])])])])},ct=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loginHeader"},[s("img",{staticClass:"logo",attrs:{src:a("886c"),alt:"logo"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cite",[a("span",[t._v("-La cité de la peur-")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"staticBackdropLabel"}},[t._v(" Forgot password ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],lt=(a("4d63"),a("ac1f"),a("25f0"),a("498a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.sent?a("span",{staticClass:"text-success"},[t._v("Message sent to "+t._s(t.recipientEmail)+" !"),a("br"),t._v(" Please check your inbox")]):t._e(),t.invalid?a("span",{staticClass:"text-danger"},[t._v("Invalid email syntax")]):t._e(),t.notfound?a("span",{staticClass:"text-danger"},[t._v("email not found")]):t._e(),t.failed?a("span",{staticClass:"text-danger"},[t._v("Sending failed")]):t._e()])}),ut=[],mt={name:"MailerComponent",props:["recipientEmail"],data:function(){return{sent:null,invalid:null,notfound:null,failed:null}},methods:{emailToReset:function(){var t=this;y.a.post("https://the-movie-factory-api.herokuapp.com/user/forgot",{recipientEmail:this.recipientEmail}).then((function(e){"success"==e.data?t.sent=!0:"invalid"==e.data?t.invalid=!0:"not found"==e.data?t.notfound=!0:"failed"==e.data&&(t.failed=!0)})).catch((function(t){return console.log(t)}))}},created:function(){var t=this;this.emailToReset(),setTimeout((function(){t.error="",t.sent=""}),5e3)}},dt=mt,pt=Object(c["a"])(dt,lt,ut,!1,null,null,null),ft=pt.exports,ht={components:{MailerComponent:ft},name:"LoginForm",props:{},data:function(){return{isEmailEmpty:!0,isEmailValid:!1,isPasswordEmpty:!0,isUsernameEmpty:!0,forgot:!1,reset:!1,signup:!1,username:"",email:"",isForgot:!1,forgotInput:"",recipientEmail:"",newPassword:"",password:"",serveurMessage:"",labelEmail:"Email",emailColor:"#6c6c6c",usernameColor:"#6c6c6c",labelUsername:"",labelPassword:"Password",passwordColor:"#6c6c6C"}},computed:Object(v["a"])({},Object(b["b"])(["login"])),methods:{handleForgot:function(){var t=this;this.isForgot=!0,this.recipientEmail=this.forgotInput,this.forgotInput="",setTimeout((function(){t.isForgot=!1}),5e3)},handleClick:function(){this.login.getLoginURL;this.checkIsEmailEmpty(this.email),this.isEmailEmpty||(this.checkIsEmailValid(this.email),this.isEmailValid&&(this.checkIsPasswordEmpty(this.password),this.isPasswordEmpty||this.$store.dispatch("fetchUser",{email:this.email,password:this.password,router:this.$router})))},resetPassword:function(){this.reset=!0,this.forgot=!1,this.signup=!1,this.checkIsEmailEmpty(this.email),this.isEmailEmpty||(this.checkIsEmailValid(this.email),this.isEmailValid)},forgotPassword:function(){this.forgot=!0,this.signup=!1,this.reset=!1,this.checkIsEmailEmpty(this.email),this.isEmailEmpty||(this.checkIsEmailValid(this.email),this.isEmailValid)},handleSignup:function(){this.signup=!0,this.reset=!1,this.forgot=!1},signups:function(){var t=this;this.checkIsEmailEmpty(this.email),this.isEmailEmpty||(this.checkIsEmailValid(this.email),this.isEmailValid&&(this.checkIsPasswordEmpty(this.password),this.isPasswordEmpty||(this.checkIsUsernameEmpty(this.username),this.isUsernameEmpty||y.a.post("https://the-movie-factory-api.herokuapp.com/user/signup",{email:this.email,password:this.password,username:this.username}).then(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.data;case 2:s=e.sent,"Email déja utilisé"==s?(t.username=s+" Régis",setTimeout((function(){t.username="",t.password="",t.email="",t.signup=!1}),2e3)):t.signup=!1;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){return console.log(t)})))))},sendMail:function(){var t=this;this.checkIsEmailEmpty(this.email),this.isEmailEmpty||(this.checkIsEmailValid(this.email),this.isEmailValid&&(this.serveurMessage="Un email de réinitialisation vient d'être envoyé",setTimeout((function(){t.serveurMessage="",t.signup=!1,t.reset=!1,t.forgot=!1}),2e3)))},handleCancel:function(){this.signup=!1,this.reset=!1,this.forgot=!1},declinePassword:function(){var t=this;this.passwordColor="red",this.labelPassword="Mot de passe incorrect",setTimeout((function(){t.labelPassword="Password",t.passwordColor="#6c6c6c",t.password=""}),2500)},checkIsEmailEmpty:function(t){var e=this;""===t.trim()?(this.emailColor="red",this.labelEmail="Veuillez renseigner une adresse email svp",setTimeout((function(){e.labelEmail="Email",e.emailColor="#6c6c6c",e.email=""}),2500)):this.isEmailEmpty=!1},checkIsEmailValid:function(t){var e=this,a=new RegExp("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+[.][a-zA-Z0-9-.]+$");a.test(t)?this.isEmailValid=!0:(this.emailColor="red",this.labelEmail="Veuillez renseigner une adresse email valide",setTimeout((function(){e.labelEmail="Email",e.emailColor="#6c6c6c",e.email=""}),2500))},checkIsPasswordEmpty:function(t){var e=this;""===t.trim()?(this.passwordColor="red",this.labelPassword="Veuillez renseigner un mot de passe",setTimeout((function(){e.labelPassword="Password",e.passwordColor="#6c6c6c",t=""}),2500)):this.isPasswordEmpty=!1},checkIsUsernameEmpty:function(t){var e=this;""===t.trim()?(this.usernameColor="red",this.labelUsername="Veuillez renseigner un pseudo",setTimeout((function(){e.labelUsername="Username",e.usernameColor="#6c6c6c",e.username=""}),2500)):this.isUsernameEmpty=!1}}},gt=ht,vt=(a("2037"),Object(c["a"])(gt,rt,ct,!1,null,"72f0fc59",null)),bt=vt.exports,_t={components:{LoginForm:bt}},Ct=_t,wt=Object(c["a"])(Ct,nt,ot,!1,null,"10b09631",null),yt=wt.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("navbar"),a("div",{staticClass:"selectedFilm"},[a("div",{attrs:{id:"filmHeader"}},[a("h2",[t._v(t._s(t.selectedFilm.title))])]),a("div",{attrs:{id:"selectedFilm"}},[a("div",{staticClass:"selectedFilmPicture"},[a("img",{staticClass:"moviePict",attrs:{src:"https://image.tmdb.org/t/p/w400/"+t.selectedFilm.poster_path,alt:"picture"}})]),a("div",{staticClass:"selectedFilmDescribe"},[t.selectedFilm.results&&t.selectedFilm.results[0].key?a("iframe",{attrs:{width:"480",height:"320",src:t.$data.youtubePath+t.selectedFilm.results[0].key,frameborder:"0",allowfullscreen:""}}):t._e(),a("p",[t._v(t._s(t.selectedFilm.overview)+" $")])])]),a("div",{attrs:{id:"filmFooter"}},[a("p",[a("span",[t._v(" Favorite ")]),this.$store.state.isFavoriteFilm?t._e():a("span",{staticClass:"badge badge-success badges",on:{click:function(e){return t.addFavorite(t.selectedFilm)}}},[t._v("Add")]),this.$store.state.isFavoriteFilm?a("span",{staticClass:"badge badge-danger badges",on:{click:function(e){return t.addFavorite(t.selectedFilm)}}},[t._v("Remove")]):t._e(),a("span",[t._v(" Seen")]),this.$store.state.isSeenFilm?t._e():a("span",{staticClass:"badge badge-success",on:{click:function(e){return t.addToSeen(t.selectedFilm)}}},[t._v("Add")]),this.$store.state.isSeenFilm?a("span",{staticClass:"badge badge-danger",on:{click:function(e){return t.addToSeen(t.selectedFilm)}}},[t._v("Remove")]):t._e()]),a("p",[t._v(" Gain: "),a("span",{staticClass:"badge badge-info"},[t._v(" "+t._s(new Intl.NumberFormat("de-DE",{style:"currency",currency:"USD",maximumSignificantDigits:1}).format(t.selectedFilm.revenue-t.selectedFilm.budget))+" ")]),t._v(" Runtime:"),a("span",{staticClass:"badge badge-info"},[t._v(" "+t._s(t.selectedFilm.runtime))]),t._v("mn ")]),a("p",t._l(t.selectedFilm.genres,(function(e,s){return a("span",{key:s},[t._v(" -"+t._s(e.name)+"- ")])})),0),t.selectedFilm.homepage?a("p",[a("a",{attrs:{href:t.selectedFilm.homepage}},[t._v("Official Home Page")])]):t._e(),a("p",[t._v(" popularity:"),a("span",{staticClass:"badge badge-warning"},[t._v(" "+t._s(t.selectedFilm.popularity))]),t._v(" release: "),a("span",{staticClass:"badge badge-warning"},[t._v(t._s(t.selectedFilm.release_date)+" ")]),t._v(" vote average: "),a("span",{staticClass:"badge badge-warning"},[t._v(t._s(t.selectedFilm.vote_average))]),t._v(" vote count: "),a("span",{staticClass:"badge badge-warning"},[t._v(t._s(t.selectedFilm.vote_count))])])]),a("div",{staticClass:"actorList"},t._l(t.selectedFilm.cast,(function(e,s){return a("div",{key:s,on:{click:function(a){return t.handleActor(e.id)}}},[a("img",{staticClass:"photoActor",attrs:{src:"https://image.tmdb.org/t/p/w200/"+e.profile_path,alt:"photo"}}),a("h4",[t._v(t._s(e.name))]),a("p",[t._v("popularity: "+t._s(e.popularity))])])})),0),t.actorsFilm.length?a("splide",{staticClass:"filmList",attrs:{options:t.options}},t._l(t.actorsFilm,(function(e,s){return a("splide-slide",{key:s,staticClass:"filmCard"},[e.poster_path?a("img",{staticClass:"photoFilm",attrs:{src:"https://image.tmdb.org/t/p/w200/"+e.poster_path,alt:"photo"},on:{click:function(a){return t.handleActorsFilm(e)}}}):t._e(),a("div",{staticClass:"cardDescription"},[a("h5",[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.overview.slice(0,100)))]),a("span",[t._v("Runtime "+t._s(t.selectedFilm.runtime)+" mn")]),a("span",[t._v("popularity: "+t._s(e.popularity))]),a("span",[t._v("vote average: "+t._s(e.vote_average))]),a("span",[t._v("vote count: "+t._s(e.vote_count))])])])})),1):t._e()],1)],1)},kt=[],Et=(a("fb6a"),a("5e2b")),Pt=(a("e50d"),{components:{Navbar:B,Splide:Et["a"],SplideSlide:Et["b"]},name:"Film",data:function(){return{actorsFilm:[],options:{rewind:!0,width:800,gap:"1rem"},youtubePath:"https://www.youtube.com/embed/"}},computed:Object(v["a"])({},Object(b["b"])(["selectedFilm","login","isFavoriteFilm","isSeenFilm"])),methods:{handleActor:function(t){var e=this;y.a.get("https://the-movie-factory-api.herokuapp.com/api/movie/person/".concat(t)).then(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.data.results.slice(0,6);case 2:s=t.sent,e.actorsFilm=s;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log(t)}))},addFavorite:function(t){for(var e=this.$store.state.login.getFavorite,a=!1,s=0;s<e.length;s++){var i=e[s];i.id==t.id&&(a=!0)}a||(this.$store.commit("addToFavorite",t),y.a.put("https://the-movie-factory-api.herokuapp.com/user/addfavorite",{email:this.login.getLoggedUser.email,filmId:t})),a&&(this.$store.commit("removeFavorite",t),y.a.put("https://the-movie-factory-api.herokuapp.com/user/removefavorite",{email:this.login.getLoggedUser.email,filmId:t})),this.$store.commit("toggleFavorite")},addToSeen:function(t){for(var e=this.$store.state.login.getSeen,a=!1,s=0;s<e.length;s++){var i=e[s];i.id==t.id&&(a=!0)}a||(this.$store.commit("addToSeen",t),y.a.put("https://the-movie-factory-api.herokuapp.com/user/seen",{email:this.login.getLoggedUser.email,filmId:t})),a&&(this.$store.commit("removeSeen",t),y.a.put("https://the-movie-factory-api.herokuapp.com/user/removeseen",{email:this.login.getLoggedUser.email,filmId:t})),this.$store.commit("toggleSeenFilm")},handleActorsFilm:function(t){var e=this;y.a.get("https://the-movie-factory-api.herokuapp.com/api/movie/".concat(t.id)).then(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.data;case 2:s=t.sent,e.$store.dispatch("addFilm",s),e.actorsFilm=[];case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return console.log(t)}))}}}),xt=Pt,Ot=(a("23a1"),Object(c["a"])(xt,Ft,kt,!1,null,"7809e00a",null)),jt=Ot.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"LoginForm login-box"},[t._m(0),a("div",{staticClass:"login"},[t.used?t._e():a("form",{attrs:{action:""}},[a("div",[a("label",{staticClass:"form-control-label",staticStyle:{"font-size":"1.4em","padding-top":"1em"},style:{color:t.inputColor}},[t._v(t._s(t.title))])]),a("div",{staticClass:"form-group log"},[a("label",{staticClass:"form-control-label",style:{color:t.inputColor}},[t._v(" New password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword,expression:"newPassword"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.newPassword},on:{input:function(e){e.target.composing||(t.newPassword=e.target.value)}}}),a("label",{staticClass:"form-control-label",style:{color:t.inputColor}},[t._v("Confirm password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordConfirm,expression:"passwordConfirm"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.passwordConfirm},on:{input:function(e){e.target.composing||(t.passwordConfirm=e.target.value)}}})]),a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.handleClick()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleClick()}}},[t._v(" Apply ")])]),t.used?a("div",[a("p",{staticClass:"form-control-label",staticStyle:{"font-size":"1.4em","padding-top":"1em"}},[t._v("Password changed")]),t._m(1)]):t._e()]),t._m(2)])])},St=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loginHeader"},[s("img",{staticClass:"logo",attrs:{src:a("886c"),alt:"logo"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-outline-success"},[a("a",{staticClass:"text-dark text-decoration-none",attrs:{href:"http://localhost:3051"}},[t._v("Take me home")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loginFooter"},[a("div",{staticClass:"testimonial-quote right"},[a("div",{staticClass:"quote-container"},[a("div",[a("blockquote",[a("p",[t._v("Le bouton rouge Régis")])]),a("cite",[a("span",[t._v("-La cité de la peur-")])])])])])])}],Rt={data:function(){return{isPasswordEmpty:!0,newPassword:"",passwordConfirm:"",mismatch:!0,title:"Reset password",inputColor:"#6c6c6C",used:!1}},methods:{handleClick:function(){var t=this;this.checkIsPasswordEmpty(this.newPassword),this.isPasswordEmpty||(this.passwordsMatch(this.newPassword,this.passwordConfirm),this.mismatch||(console.log("Dans handleclick"),y.a.post("http://localhost:3050/user/update-user",{email:this.$route.params.email,password:this.newPassword}).then((function(e){console.log(e.data),"success"==e.data?t.used=!0:"invalid"!=e.data&&"not found"!=e.data&&"failed"!=e.data||(t.used=!1)})).catch((function(e){console.log(e),t.used=!1}))))},declinePassword:function(t){var e=this;this.inputColor="#d64541",this.title=t,setTimeout((function(){e.title="Reset password",e.inputColor="#6c6c6c",e.newPassword="",e.confirmPassword=""}),2500)},checkIsPasswordEmpty:function(t){""===t.trim()?(this.declinePassword("Please type a password"),this.isPasswordEmpty=!0):this.isPasswordEmpty=!1},passwordsMatch:function(t,e){t==e?this.mismatch=!1:(this.declinePassword("Passwords don't match"),this.mismatch=!0)}}},Ut=Rt,Lt=Object(c["a"])(Ut,$t,St,!1,null,null,null),It=Lt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("navbar"),a("h2",[t._v(" Welcome "+t._s(t.login.getLoggedUser.username.toUpperCase())+" on your Profil Page ")]),a("div",{staticClass:"profilMain row m-0"},[a("profil-component",{staticClass:"col-sm-2",attrs:{name:t.login.getLoggedUser.username,favoriteCount:t.login.getLoggedUser.favorite,seen:t.login.getLoggedUser.seen}}),a("div",{staticClass:"col-sm-10"},[a("h3",{staticClass:"col-12 bg-dark"},[t._v("Favorites Film")]),a("div",{staticClass:"favoriteFilm row"},t._l(t.login.getFavorite,(function(t,e){return a("movie-card",{key:e,staticClass:"homeFilmCard col-lg-6",attrs:{film:t,title:t.title,path:t.poster_path,description:t.overview,vote:t.vote_average}})})),1),a("h3",{staticClass:"col-sm-12 bg-dark"},[t._v("Seen Film")]),a("div",{staticClass:"seenFilm row"},t._l(t.login.getSeen,(function(t,e){return a("movie-card",{key:e,staticClass:"homeFilmCard col-lg-6",attrs:{film:t,title:t.title,path:t.poster_path,description:t.overview,vote:t.vote_average}})})),1)])],1)],1)},Tt=[],Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profilComponent"},[a("h5",[t._v(t._s(this.name))]),a("p",[t._v("favorite: "+t._s(this.favoriteCount.length))]),a("p",[t._v("seen: "+t._s(this.seen.length))])])},At=[],Nt={data:function(){return{isFavoriteSelected:!0}},name:"profilComponent",props:["name","favoriteCount","seen"]},Dt=Nt,Bt=(a("d49e"),Object(c["a"])(Dt,Vt,At,!1,null,"030fde7c",null)),zt=Bt.exports,qt={name:"ProfilPage",components:{Navbar:B,ProfilComponent:zt,MovieCard:G},MovieCardata:function(){return{isFavoriteSelected:!0}},computed:Object(v["a"])({},Object(b["b"])(["login"]))},Ht=qt,Jt=(a("e533"),Object(c["a"])(Ht,Mt,Tt,!1,null,"a055ae5e",null)),Zt=Jt.exports,Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main row"},[a("navbar"),a("h2",{staticClass:"col-12"},[t._v(" Welcome "+t._s(t.login.getLoggedUser.username.toUpperCase())+" inside the Community ")]),a("div",{staticClass:"row m-0"},t._l(t.getAllUser,(function(e,s){return a("profil-component",{key:s,staticClass:"users m-4",attrs:{name:e.username,favoriteCount:e.favorite,seen:e.seen},on:{click:function(e){return t.handleUserProfil()}}})})),1)],1)},Yt=[],Gt={name:"CommunityPage",components:{Navbar:B,ProfilComponent:zt},computed:Object(v["a"])({},Object(b["b"])(["login","getAllUser"])),methods:{handleUserProfil:function(){}}},Kt=Gt,Qt=(a("8bdc"),Object(c["a"])(Kt,Wt,Yt,!1,null,"5bc688ad",null)),Xt=Qt.exports;s["default"].use(m["a"]);var te=[{path:"/",name:"Login",component:yt},{path:"/home",name:"home",component:it},{path:"/film",name:"Film",component:jt},{path:"/reset/:email",name:"Reset",component:It},{path:"/profil",name:"profil",component:Zt},{path:"/community",name:"community",component:Xt},{path:"/*",redirect:"/"}],ee=new m["a"]({mode:"history",base:"/movie_factory/",routes:te}),ae=ee,se=a("4360"),ie=a("5f5b"),ne=a("b1e0");a("f9e3"),a("2dd8");a("ed18").config(),s["default"].use(Et["c"]),s["default"].use(ie["a"]),s["default"].use(ne["a"]),s["default"].config.productionTip=!1,new s["default"]({router:ae,store:se["a"],render:function(t){return t(u)}}).$mount("#app")},"5f70":function(t,e,a){},"648a":function(t,e,a){"use strict";a("5f70")},"7d77":function(t,e,a){},"7f0a":function(t,e,a){},"85ec":function(t,e,a){},"886c":function(t,e,a){t.exports=a.p+"img/the-movie-factory.f7abe17b.png"},"89fd":function(t,e,a){t.exports=a.p+"img/homeLogo.9ae6945c.png"},"8bdc":function(t,e,a){"use strict";a("05c3")},a78f:function(t,e,a){"use strict";a("f040")},bdd8:function(t,e,a){"use strict";a("f17b")},cabe:function(t,e,a){},d3ae:function(t,e,a){},d49e:function(t,e,a){"use strict";a("7d77")},dc5b:function(t,e,a){},e533:function(t,e,a){"use strict";a("d3ae")},f040:function(t,e,a){},f17b:function(t,e,a){},f3d9:function(t,e,a){}});
//# sourceMappingURL=app.15c6a15a.js.map